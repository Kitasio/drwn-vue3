<template>
    <stock-nav></stock-nav>

    <div class="md:h-screen font-ttnorms p-5 sm:p-10 lg:px-32 mx-auto">
        <div class="grid grid-cols-12 h-5/6">
            <stock-links class="hidden sm:inline"></stock-links>
            <div class="col-span-12 lg:col-span-10 pb-10">
                    <div id="box" class=" shadow-brand rounded-md px-5 md:px-10 py-5 flex flex-col justify-between md:flex-row">

                        <div class="flex flex-col justify-between">
                            <div class="flex flex-col mt-5 space-y-2">
                                <img class="w-20" src="../assets/img/avatar.svg" alt="">
                                <div @click="toggleName = !toggleName" class="text-lg">{{userName}}</div>
                                <div v-if="toggleName">
                                    <input v-model="userName" type="text" placeholder="Введите имя" class="rounded bg-transparent border-2 border-light-purple placeholder-light-purple focus:ring-0 focus:border-black">
                                </div>

                                <div class="font-benzin-semibold">{{user.email}}</div>
                                <button @click="togglePassword = !togglePassword" class="text-purple self-start">Сменить пароль</button>
                                <button v-if="user.diplayName == ''" @click="toggleName = !toggleName" class="text-purple self-start">Добавит имя</button>

                                <a target="_blank" class="text-purple self-start" href="https://my.cloudpayments.ru/unsubscribe">Отменить подписку</a>

                                <div v-if="togglePassword" class="space-y-3">
                                    <input v-model="pass1" type="password" class="rounded bg-transparent border-2 border-light-purple placeholder-light-purple focus:ring-0 focus:border-black" placeholder="Введите новый пароль">
                                    <input v-model="pass2" type="password" class="rounded bg-transparent border-2 border-light-purple placeholder-light-purple focus:ring-0 focus:border-black" placeholder="Повторите пароль">
                                    <div v-if="passwordUpdated" class="mt-5">Вы успешно сменили пароль</div>
                                    <div v-if="passwordUpdatedError" class="mt-5 text-base-red">Что-то пошло не так</div>
                                </div>
                            </div>
                            <div class="flex mb-10 md:mb-0">
                                <button @click="updateName(userName); updatePass(); toggleName = false;" class="py-3 px-2 border-2 border-black rounded-md">Сохранить</button>
                            </div>
                        </div>

                        <div class="flex flex-col justify-between space-y-5">

                            <div v-if="hasAccess()" class="grad flex justify-between text-white px-5 pt-5 rounded-xl md:w-130 md:mt-5">
                                <div class="flex flex-col justify-between">
                                    <h1 class="font-benzin-semibold md:text-3xl">Тариф<br> “Трейдер”</h1>
                                    <router-link to="/tariffs" class="border-2 mb-5 cursor-pointer border-white px-4 py-3 rounded text-center text-lg">Тарифы</router-link>
                                </div>
                                <div class="flex flex-col justify-between">
                                    <p class="md:text-lg text-right">Осталось 29 дней</p>
                                    <!-- <svg width="158" height="244" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path d="M127.595 112.949c.547 1.439 8.636-.297 18.073-3.874 9.438-3.578 12.184-6.301 11.637-7.737-.547-1.436-4.179-1.05-13.617 2.53s-16.648 7.646-16.093 9.081z" fill="#370522"/><path d="M128.784 153.845c-3.037.47-7.873.406-7.873.406s9.904-39.819 12.008-51.15c.673-3.62 18.073-9.98 18.472 5.61.307 12.302-19.881 31.165-20.834 41.271-.181 1.929-1.193 3.774-1.773 3.863z" fill="url(#paint0_linear)"/><path d="M130.112 152.712s1.033 13.879-3.332 11.389c-4.704-2.687-14.189-1.095-14.189-1.095s.842-8.462 4.647-9.596c9.014-2.686 9.381-8.945 9.381-8.945l3.493 8.247z" fill="url(#paint1_linear)"/><path d="M94.62 71.456c2.578-4.598 11.535-9.53 21.899-5.128 10.364 4.402 24.986 13.914 40.7 34.872 0 0-17.43.374-29.586 11.832 0 0-19.997-11.423-27.058-19.39-7.061-7.968-8.797-17.116-5.955-22.186z" fill="url(#paint2_linear)"/><path d="M120.579 211.429c6.004 6.299 8.606 6.95 17.083 25.434 2.401 5.239 11.686 48.754 11.686 48.754-2.895 4.456-26.88-3.174-40.237-.495 0 0-17.99-44.449-17.99-75.466.005-8.462 18.98-9.219 29.458 1.773z" fill="url(#paint3_linear)"/><path d="M129.254 160.111c1.698 7.15 2.515 54.599-1.191 62.165-2.642 5.39-32.389 18.754-35.144 3.736-2.422-13.191-9.611-57.266-8.987-65.114.601-7.566 40.212-22.268 45.322-.787z" fill="url(#paint4_linear)"/><path d="M130.946 223.979l.523-.394c-5.531-7.341-15.405-4.043-15.504-4.008l.213.619c.094-.02 9.525-3.174 14.768 3.783zM82.766 145.268c.336-5.039 17.855-13.429 31.15-12.211l3.838 46.716c-1.149 1.344-4.858 6.932-5.551 8.452-5.276 11.575-10.069 19.631-21.978 22.827-3.32-22.933-7.863-59.781-7.46-65.784z" fill="#370522"/><path d="M82.157 218.514c2.924 8.195 17.163 46.221 5.534 72.358-4.457 2.889-25.405-4.704-38.705-6.834 0 0-5.637-48.899 5.987-84.94 2.595-8.046 22.08 5.11 27.184 19.416z" fill="url(#paint5_linear)"/><path d="M115.668 154.098c-1.084 7.269-24.23 67.146-30.49 72.789-4.456 4.02-20.935 4.979-29.318-7.784-8.383-12.763 13.951-74.099 17.455-81.15 3.382-6.811 45.614-5.694 42.353 16.145z" fill="url(#paint6_linear)"/><path d="M75.217 67.172c-10.421 6.348-14.464 22.02-15.214 48.947-.75 26.927-5.556 44.458-2.6 51.445 0 0 31.091 28.313 76.367 10.25 0 0-1.379-7.702-4.457-41.079-3.077-33.376-3.001-42.43-7.442-55.458-4.442-13.028-25.526-24.902-31.218-21.77-5.692 3.132-7.393 2.76-15.436 7.665z" fill="url(#paint7_linear)"/><path d="M19.284 20.523c3.489 8.153 13.602 20.78 17.472 29.819 4.103 9.581-13.565 26.078-19.895 8.819-4.242-11.567-7.346-37.799-7.346-37.799s8.819-3.06 9.77-.839z" fill="url(#paint8_linear)"/><path d="M10.26 4.504c-2.257-.448-7.867-1.04-9.1 1.387-1.233 2.426 4.077 1.317 4.077 1.317s-3.585.95-3.164 1.876c.421.926 2.867 1.587 4.984 1.008 2.117-.58 6.073-.42 6.734-1.448.661-1.028.391-3.37-3.53-4.14z" fill="url(#paint9_linear)"/><path d="M15.719 52.663c-2.852-10.398-4.748-27.1-6.732-32.945 0 0 4.845-6.64 6.15-5.291 2.956 3.063 18.143 30.056 18.445 30.906-1.131 2.263-16.214 6.754-17.863 7.33z" fill="url(#paint10_linear)"/><path d="M17.047 22.54A33.92 33.92 0 0017.66 9.25c-1.154-7.125-3.412-7.79-9.066-8.977-5.655-1.186-2.61 1.812-1.394 2.582 1.215.77 5.585 1.924 5.268 3.865 0 0-6.437 3.976-3.713 9.475.264.532.247 1.592.247 3.385-.017 2.01 8.046 2.958 8.046 2.958z" fill="url(#paint11_linear)"/><path d="M55.978 56.804S38.815 48.1 35.28 47.128c-7.811-2.146-21.225 7.544-17.618 14.333 3.607 6.788 16.078 17.18 28.74 21.787 12.66 4.607 23.752-18.093 9.576-26.444z" fill="url(#paint12_linear)"/><path d="M54.085 55.195l.263-.584c-.139-.065-13.93-6.23-19.084-8.047l-11.158-18.63-.55.329 11.28 18.828.109.04c5.038 1.755 19.002 8 19.14 8.064z" fill="#370522"/><path d="M86.856 86.86c-1.294 4.187-4.352 8.618-14.998 8.349-10.646-.27-29.534-7.859-42.74-16.435 0 0 4.093-23.755 20.403-28.192 0 0 23.411 14.147 30.537 19.393 7.125 5.246 8.224 12.273 6.798 16.885z" fill="url(#paint13_linear)"/><path d="M45.863 75.909c0 .101.495 10.173 11.2 13.174l.18-.63c-10.246-2.868-10.724-12.47-10.726-12.566l-.654.022z" fill="#370522"/><path d="M31.642 68.565a48.075 48.075 0 00-3.08 10.03l-.027.165.118.12c.151.148 15.251 14.914 32.367 17.622l.101-.646c-16.093-2.548-30.42-15.92-31.886-17.33.228-1.239 1.82-9.198 6.338-15.898l-.542-.366a38.455 38.455 0 00-3.39 6.303zM80.864 218.809c3.882-4.395 10.465-2.62 10.53-2.602l.274.076 11.285-25.54-.597-.263-11.061 25.031c-1.342-.297-7.237-1.305-10.921 2.864l.49.434zM104.523 153.044c7.922 0 12.844-4.342 12.918-4.409l-.438-.495c-.109.099-11.035 9.72-26.652-.367l-.354.55c5.484 3.55 10.411 4.721 14.526 4.721zM91.395 279.469c.037-.121 3.76-12.52-2.476-39.199l-.636.148c6.19 26.491 2.535 38.734 2.498 38.855l.614.196z" fill="#370522"/><path d="M99.453 48.781l.379 12.585s-8.202 5.53-14.243.792l.822-12.107 13.042-1.27z" fill="url(#paint14_linear)"/><path d="M85.805 59.046s2.288-2.451 4.937-7.276l-4.52 1.109-.417 6.167z" fill="#750B3B"/><path d="M82.844 55.781c2.498.52 12.943-3.203 14.934-6.56.708-1.196.888-4.576.572-6.257-.99-5.271.351-11.077-3.427-12.941-1.592-.78-8.774-1.538-10.322-1.812-6.053-1.085-5.823 6.783-6.466 11.923-.726 5.756.307 14.714 4.709 15.647z" fill="url(#paint15_linear)"/><path d="M80.641 30.958c.552.267 2.255.968 2.255.968s.352 4.355.963 5.989c.612 1.634-1.638 7.281-4.661 7.76-3.023.477-1.204 3.745-.973 5.141.329 1.996-1.573 4.058 2.154 5.487 2.475.953 8.808-.305 7.266-4.308-1.542-4.004-4.239-9.022-1.327-13.303 2.912-4.28-.611 5.313 4.729 8.913 5.34 3.6 6.734 4.987 6.734 4.987s.792-2.229 2.352-2.741c1.56-.513 6.11-5.742 6.437-12.627.327-6.885-2.746-9.294-8.821-10.656-6.076-1.362-3.84-3.887-7.633-4.704-3.793-.817-8.512-5.509-8.512-5.509S75.58 28.5 80.641 30.959z" fill="url(#paint16_linear)"/><path d="M92.613 42.66c-1.114 2.186-3.535 3.184-5.41 2.228-1.874-.956-2.488-3.5-1.374-5.694 1.114-2.194 3.538-3.184 5.41-2.229 1.872.956 2.488 3.514 1.374 5.695z" fill="url(#paint17_linear)"/><path d="M86.992 43.264c.088.1.194.184.312.247a.91.91 0 00.815.028c.609-.248.643-.726.673-1.107a1.331 1.331 0 01.51-1.1 2.766 2.766 0 011.094-.494c.594-.169 1.266-.36 1.134-1.53a1.352 1.352 0 00-.527-.936c-.874-.686-2.55-.483-2.62-.473l.082.648c.409-.051 1.59-.091 2.134.337a.723.723 0 01.28.495c.072.62-.084.661-.66.827-.487.11-.943.326-1.335.634a1.957 1.957 0 00-.743 1.552c-.027.362-.045.458-.273.553a.265.265 0 01-.247 0c-.248-.134-.421-.662-.465-.897l-.644.122c.074.396.239.77.48 1.094z" fill="#750B3B"/><path d="M126.929 112.768h.548c-.35-17.392-5.588-32.198-5.64-32.346l-.515.183c.052.139 5.258 14.867 5.607 32.163z" fill="#370522"/></g><defs><linearGradient id="paint0_linear" x1="143.459" y1="102.333" x2="130.748" y2="147.727" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint1_linear" x1="-34187.4" y1="29457.3" x2="-35442.5" y2="29457.3" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint2_linear" x1="93.318" y1="88.824" x2="157.221" y2="88.824" gradientUnits="userSpaceOnUse"><stop stop-color="#3A0122"/><stop offset="1" stop-color="#82004A"/></linearGradient><linearGradient id="paint3_linear" x1="114.119" y1="159.261" x2="122.421" y2="281.175" gradientUnits="userSpaceOnUse"><stop stop-color="#DD5700"/><stop offset="1" stop-color="#F8AA02"/></linearGradient><linearGradient id="paint4_linear" x1="-89835.8" y1="125476" x2="-94838.8" y2="166419" gradientUnits="userSpaceOnUse"><stop stop-color="#DD5700"/><stop offset="1" stop-color="#F8AA02"/></linearGradient><linearGradient id="paint5_linear" x1="-84856.6" y1="138873" x2="-58324.1" y2="176123" gradientUnits="userSpaceOnUse"><stop stop-color="#DD5700"/><stop offset="1" stop-color="#F8AA02"/></linearGradient><linearGradient id="paint6_linear" x1="-115459" y1="138249" x2="-92484.7" y2="182808" gradientUnits="userSpaceOnUse"><stop stop-color="#DD5700"/><stop offset="1" stop-color="#F8AA02"/></linearGradient><linearGradient id="paint7_linear" x1="-153934" y1="193181" x2="-110708" y2="154444" gradientUnits="userSpaceOnUse"><stop stop-color="#3A0122"/><stop offset="1" stop-color="#82004A"/></linearGradient><linearGradient id="paint8_linear" x1="-45123.6" y1="52623.9" x2="-38221.9" y2="42589.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint9_linear" x1="-21230.6" y1="6957.96" x2="-20866.2" y2="5073.86" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint10_linear" x1="-39862" y1="43021.7" x2="-34384.8" y2="34422.4" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint11_linear" x1="-20819.9" y1="25134.6" x2="-17457.1" y2="20464.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint12_linear" x1="-75333.1" y1="41006.5" x2="-71852.5" y2="30507.6" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint13_linear" x1="-116005" y1="69125.6" x2="-103147" y2="44833.8" gradientUnits="userSpaceOnUse"><stop stop-color="#3A0122"/><stop offset="1" stop-color="#82004A"/></linearGradient><linearGradient id="paint14_linear" x1="-26606" y1="16883.7" x2="-25881.5" y2="14696.1" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint15_linear" x1="-38461.6" y1="30548.2" x2="-36902.7" y2="26795.9" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint16_linear" x1="-52457.1" y1="40026.3" x2="-55882.4" y2="40026.3" gradientUnits="userSpaceOnUse"><stop stop-color="#3A0122"/><stop offset="1" stop-color="#82004A"/></linearGradient><linearGradient id="paint17_linear" x1="-14742.4" y1="9544.73" x2="-14326.1" y2="8312.66" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><clipPath id="clip0"><path fill="#fff" transform="matrix(-1 0 0 1 157.355 0)" d="M0 0h156.382v293H0z"/></clipPath></defs></svg> -->
                                    <!-- <svg class="mt-20 w-20" width="208" height="149" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M125.337 56.46c3.842 1.216 17.492-1.164 17.492-1.164l.726-30.194-21.857 17.824v10.908c0-.01-.203 1.409 3.639 2.625z" fill="#FD9F84"/><path d="M121.699 43.332v9.296l12.967-6.03-12.967-3.266z" fill="#B8735F"/><path d="M118.187 16.554s-6.51 17.92-3.255 27.846c3.255 9.937 20.971 2.53 22.732 0 1.761-2.53 11.686-14.216 6.617-25.509-5.07-11.303-21.612-12.658-26.094-2.337z" fill="#FD9F84"/><path d="M143.182 40.952l-4.942-9.478s-5.634-1.217-6.488-3.608l-2.466-6.884s-2.465.203-6.072-.17c-2.978-.31-5.87-1.196-8.452-2.701-1.943-1.131-3.821-2.679-4.269-4.547-1.953-8.154.587-6.607 11.206-4.483 0 0 27.641-7.748 27.054 6.298 0 0 7.267 14.11-5.571 25.573z" fill="#1B1A1F"/><path d="M132.157 31.942s3.511-6.266 8.175-5.422c4.664.832 2.231 8.666-2.582 11.43l-5.593-6.009z" fill="#FD9F84"/><path d="M135.903 6.948s-11.013-.929-13.436-2.54c-4.675-3.117-7.801-1.463-8.292.096-.491 1.558-.161 4.205 2.742 6.329 4.536 3.32 11.196 1.654 14.803.587 3.596-1.078 4.183-4.472 4.183-4.472zM125.457 30.705c.139.277.171.598.128.907-.064.416-.245.982-.726.929-.747-.096-.704-1.441-.213-1.921.416-.417.672-.203.811.085zM117.59 30.705c.139.277.171.598.128.907-.064.416-.246.982-.726.929-.747-.096-.704-1.441-.213-1.921.416-.417.672-.203.811.085zM136.287 33.277c.032 0 .054-.01.075-.032l3.074-3.255a.104.104 0 000-.15.104.104 0 00-.15 0l-3.073 3.256a.103.103 0 000 .15c.032.02.053.031.074.031zM121.272 42.297s.011 0 0 0c3.437-.288 4.419-2.924 4.429-2.956.022-.054-.01-.118-.064-.139-.053-.021-.117.01-.138.064-.011.021-.95 2.54-4.237 2.807-.064 0-.107.053-.096.117.01.065.053.107.106.107zM119.32 38.111c.363 0 .608-.053.64-.064.053-.01.096-.074.075-.128-.011-.053-.075-.096-.128-.074-.011 0-1.238.277-2.113-.427-.705-.566-.779-1.142-.619-1.495.16-.352.576-.523 1.045-.427a.548.548 0 00.395-.096c.94-.64 1.601-4.333 1.633-4.493.011-.053-.032-.117-.085-.128-.054-.01-.118.032-.128.085-.011.043-.673 3.757-1.537 4.355a.343.343 0 01-.235.064c-.565-.107-1.067.107-1.27.544-.192.417-.117 1.1.673 1.75.544.438 1.184.535 1.654.535zM127.868 28.623c.032 0 .074-.022.085-.054.032-.053.021-.117-.032-.149-2.423-1.558-5.059-.021-5.091 0-.053.032-.064.096-.032.15.032.053.096.064.15.031.021-.01 2.55-1.494 4.866 0 .022.022.032.022.054.022zM119.275 28.626c.032 0 .053-.01.074-.032a.103.103 0 000-.15c-.053-.042-1.248-1.152-4.098-1.366a.115.115 0 00-.117.096c0 .064.042.107.096.118 2.753.202 3.949 1.291 3.959 1.302.032.032.054.032.086.032z" fill="#1B1A1F"/><path d="M143.095 7.8s-8.047-1.537-11.515-4.183c-3.469-2.647-11.27-4.91-10.641 1.259.63 6.17 14.109 7.493 14.29 7.493.193 0 7.866-4.569 7.866-4.569zM110.131 126.99h.011c.053-.011.106-.053.096-.117l-3.223-32.084c-.011-.053-.054-.107-.118-.096-.053.01-.106.053-.096.117l3.223 32.084c0 .053.053.096.107.096z" fill="#1B1A1F"/><path d="M163.076 60.59s16.008 1.515 23.383 21.207c3.628 9.713 10.576 27.484 13.457 40.431 1.676 7.535-4.055 14.686-11.771 14.686h-13.97L153.62 75.853l9.456-15.263z" fill="#AD00FF"/><path d="M46.588 112.868l44.813-39.192c4.13-3.404 7.855-6.596 12.636-9.03 5.069-2.572 10.704-4.098 16.019-6.115.032-.01.363-.107.374-.139l.565-4.792c6.895 1.035 22.572-.854 22.572-.854.47 1.42.79 5.027.79 5.027l18.719 2.818 13.842 76.324H108.53l-1.846-24.772-44.365 23.833a12.219 12.219 0 01-15.304-4.664c-3.159-5.017-4.813-14.463-.427-18.444z" fill="#AD00FF"/><path d="M131.807 59.984c2.284 0 4.269-.182 5.859-.406 4.194-.608 6.702-1.676 6.734-1.686.053-.022.075-.086.053-.139-.021-.053-.085-.075-.138-.053-.022.01-2.519 1.067-6.681 1.675-3.842.555-9.947.822-17.172-1.067-.053-.01-.117.021-.128.075-.011.053.021.117.075.128a45.708 45.708 0 0011.398 1.473zM167.707 114.159h.032a.117.117 0 00.075-.128l-5.134-17.493a.115.115 0 00-.128-.075.115.115 0 00-.074.128l5.133 17.493c.011.054.053.075.096.075z" fill="#1B1A1F"/><path d="M118.103 115.921c.011 0 .011 0 0 0l51.76-1.751a.107.107 0 00.107-.106.107.107 0 00-.107-.107l-51.749 1.75a.108.108 0 00-.107.107c0 .054.043.107.096.107z" fill="#1B1A1F"/><path d="M72.277 118.588L41.68 69.961 22.608 81.147l23.8 49.118 25.869-11.677z" fill="#AD00FF"/><path d="M22.608 81.148c.213.374.928.416 2.006.192.213-.042.438-.096.672-.16.032-.01.054-.01.075-.021 2.017-.566 4.91-1.857 7.962-3.618a48.668 48.668 0 004.503-2.925c.16-.117.32-.234.47-.352.256-.192.502-.395.736-.576 2.017-1.633 3.127-3.01 2.775-3.618-.384-.662-2.39-.289-5.144.832-.288.117-.587.245-.896.384-.075.032-.15.064-.225.107a51.166 51.166 0 00-4.46 2.295c-3.448 1.985-6.255 4.098-7.631 5.624-.054.064-.107.118-.16.182-.15.17-.267.33-.374.48-.341.491-.459.907-.31 1.174z" fill="#1B1A1F"/><path d="M1.657 66.54s1.697 2.646 3.394 4.332c1.697 1.687 11.953 3.042 11.953 3.042L1.657 66.54z" fill="#FD9F84"/><path d="M3.077 67.615c1.249.844 3.896 2.914 9.37 4.825l8.517 2.732 3.789 3.704.523.501 1.355 1.324a.197.197 0 01.075-.021c1.995-.63 4.845-1.996 7.854-3.854a50.703 50.703 0 004.419-3.052 58.13 58.13 0 00-.971-1.334 69.506 69.506 0 00-1.399-1.836c-1.44-1.825-2.966-3.522-4.119-4.259-2.967-1.878-11.793-1.003-17.567-2.113-5.784-1.11-11.472-3.8-14.78-2.583-.267.096-.32 1.676 1.323 2.114-.982.085-2.38 1.142 1.611 3.852z" fill="#FD9F84"/><path d="M22.98 77.148l4.003-3.277-6.02 1.313 2.018 1.964z" fill="#B8735F"/><path d="M72.78 136.796h62.666a1.703 1.703 0 001.623-2.209l-10.48-33.845a1.696 1.696 0 00-1.623-1.195H62.299a1.702 1.702 0 00-1.622 2.209l10.48 33.845a1.697 1.697 0 001.622 1.195z" fill="#1B1A1F"/><path d="M128.112 136.798h40a1.25 1.25 0 001.249-1.248 1.25 1.25 0 00-1.249-1.249h-40v2.497z" fill="#1B1A1F"/><path d="M161.185 135.954h3.116v-1.953a.475.475 0 00-.47-.47h-2.177a.474.474 0 00-.469.47v1.953zM156.18 135.954h3.116v-1.953a.474.474 0 00-.47-.47h-2.177a.474.474 0 00-.469.47v1.953zM151.187 135.954h3.116v-1.953a.475.475 0 00-.47-.47h-2.177a.474.474 0 00-.469.47v1.953zM146.192 135.954h3.117v-1.953a.475.475 0 00-.47-.47h-2.177a.475.475 0 00-.47.47v1.953zM141.196 135.954h3.117v-1.953a.475.475 0 00-.47-.47h-2.177a.475.475 0 00-.47.47v1.953z" fill="#1B1A1F"/><path d="M70.11 136.797h64.972l-11.163-36.043a1.696 1.696 0 00-1.623-1.195H59.629a1.703 1.703 0 00-1.622 2.209l10.48 33.845a1.701 1.701 0 001.622 1.184z" fill="#fff"/><path d="M96.502 121.311a3.138 3.138 0 100-6.276 3.138 3.138 0 000 6.276z" fill="#1B1A1F"/><path d="M207.3 149c0-8.293-6.723-15.016-15.016-15.016H42.127c-8.293 0-15.016 6.723-15.016 15.016H207.3z" fill="#C591DE"/></svg> -->
                                    <img class="w-5/6 self-end mt-24 md:w-full" src="../assets/img/right-man.svg" alt="">
                                </div>
                            </div>

                            <div v-else class="grad-pink flex justify-between text-white px-5 pt-5 rounded-xl md:w-130 md:mt-5">
                                <div class="flex flex-col justify-between">
                                    <h1 class="font-benzin-semibold md:text-3xl">Тариф<br> “Старт”</h1>
                                    <router-link to="/tariffs" class="border-2 mb-5 cursor-pointer border-white px-4 py-3 rounded text-center text-lg">Тарифы</router-link>
                                </div>
                                <div class="flex flex-col justify-between">
                                    <p class="md:text-lg text-right">Бесплатно</p>
                                    <svg width="158" height="244" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path d="M127.595 112.949c.547 1.439 8.636-.297 18.073-3.874 9.438-3.578 12.184-6.301 11.637-7.737-.547-1.436-4.179-1.05-13.617 2.53s-16.648 7.646-16.093 9.081z" fill="#370522"/><path d="M128.784 153.845c-3.037.47-7.873.406-7.873.406s9.904-39.819 12.008-51.15c.673-3.62 18.073-9.98 18.472 5.61.307 12.302-19.881 31.165-20.834 41.271-.181 1.929-1.193 3.774-1.773 3.863z" fill="url(#paint0_linear)"/><path d="M130.112 152.712s1.033 13.879-3.332 11.389c-4.704-2.687-14.189-1.095-14.189-1.095s.842-8.462 4.647-9.596c9.014-2.686 9.381-8.945 9.381-8.945l3.493 8.247z" fill="url(#paint1_linear)"/><path d="M94.62 71.456c2.578-4.598 11.535-9.53 21.899-5.128 10.364 4.402 24.986 13.914 40.7 34.872 0 0-17.43.374-29.586 11.832 0 0-19.997-11.423-27.058-19.39-7.061-7.968-8.797-17.116-5.955-22.186z" fill="url(#paint2_linear)"/><path d="M120.579 211.429c6.004 6.299 8.606 6.95 17.083 25.434 2.401 5.239 11.686 48.754 11.686 48.754-2.895 4.456-26.88-3.174-40.237-.495 0 0-17.99-44.449-17.99-75.466.005-8.462 18.98-9.219 29.458 1.773z" fill="url(#paint3_linear)"/><path d="M129.254 160.111c1.698 7.15 2.515 54.599-1.191 62.165-2.642 5.39-32.389 18.754-35.144 3.736-2.422-13.191-9.611-57.266-8.987-65.114.601-7.566 40.212-22.268 45.322-.787z" fill="url(#paint4_linear)"/><path d="M130.946 223.979l.523-.394c-5.531-7.341-15.405-4.043-15.504-4.008l.213.619c.094-.02 9.525-3.174 14.768 3.783zM82.766 145.268c.336-5.039 17.855-13.429 31.15-12.211l3.838 46.716c-1.149 1.344-4.858 6.932-5.551 8.452-5.276 11.575-10.069 19.631-21.978 22.827-3.32-22.933-7.863-59.781-7.46-65.784z" fill="#370522"/><path d="M82.157 218.514c2.924 8.195 17.163 46.221 5.534 72.358-4.457 2.889-25.405-4.704-38.705-6.834 0 0-5.637-48.899 5.987-84.94 2.595-8.046 22.08 5.11 27.184 19.416z" fill="url(#paint5_linear)"/><path d="M115.668 154.098c-1.084 7.269-24.23 67.146-30.49 72.789-4.456 4.02-20.935 4.979-29.318-7.784-8.383-12.763 13.951-74.099 17.455-81.15 3.382-6.811 45.614-5.694 42.353 16.145z" fill="url(#paint6_linear)"/><path d="M75.217 67.172c-10.421 6.348-14.464 22.02-15.214 48.947-.75 26.927-5.556 44.458-2.6 51.445 0 0 31.091 28.313 76.367 10.25 0 0-1.379-7.702-4.457-41.079-3.077-33.376-3.001-42.43-7.442-55.458-4.442-13.028-25.526-24.902-31.218-21.77-5.692 3.132-7.393 2.76-15.436 7.665z" fill="url(#paint7_linear)"/><path d="M19.284 20.523c3.489 8.153 13.602 20.78 17.472 29.819 4.103 9.581-13.565 26.078-19.895 8.819-4.242-11.567-7.346-37.799-7.346-37.799s8.819-3.06 9.77-.839z" fill="url(#paint8_linear)"/><path d="M10.26 4.504c-2.257-.448-7.867-1.04-9.1 1.387-1.233 2.426 4.077 1.317 4.077 1.317s-3.585.95-3.164 1.876c.421.926 2.867 1.587 4.984 1.008 2.117-.58 6.073-.42 6.734-1.448.661-1.028.391-3.37-3.53-4.14z" fill="url(#paint9_linear)"/><path d="M15.719 52.663c-2.852-10.398-4.748-27.1-6.732-32.945 0 0 4.845-6.64 6.15-5.291 2.956 3.063 18.143 30.056 18.445 30.906-1.131 2.263-16.214 6.754-17.863 7.33z" fill="url(#paint10_linear)"/><path d="M17.047 22.54A33.92 33.92 0 0017.66 9.25c-1.154-7.125-3.412-7.79-9.066-8.977-5.655-1.186-2.61 1.812-1.394 2.582 1.215.77 5.585 1.924 5.268 3.865 0 0-6.437 3.976-3.713 9.475.264.532.247 1.592.247 3.385-.017 2.01 8.046 2.958 8.046 2.958z" fill="url(#paint11_linear)"/><path d="M55.978 56.804S38.815 48.1 35.28 47.128c-7.811-2.146-21.225 7.544-17.618 14.333 3.607 6.788 16.078 17.18 28.74 21.787 12.66 4.607 23.752-18.093 9.576-26.444z" fill="url(#paint12_linear)"/><path d="M54.085 55.195l.263-.584c-.139-.065-13.93-6.23-19.084-8.047l-11.158-18.63-.55.329 11.28 18.828.109.04c5.038 1.755 19.002 8 19.14 8.064z" fill="#370522"/><path d="M86.856 86.86c-1.294 4.187-4.352 8.618-14.998 8.349-10.646-.27-29.534-7.859-42.74-16.435 0 0 4.093-23.755 20.403-28.192 0 0 23.411 14.147 30.537 19.393 7.125 5.246 8.224 12.273 6.798 16.885z" fill="url(#paint13_linear)"/><path d="M45.863 75.909c0 .101.495 10.173 11.2 13.174l.18-.63c-10.246-2.868-10.724-12.47-10.726-12.566l-.654.022z" fill="#370522"/><path d="M31.642 68.565a48.075 48.075 0 00-3.08 10.03l-.027.165.118.12c.151.148 15.251 14.914 32.367 17.622l.101-.646c-16.093-2.548-30.42-15.92-31.886-17.33.228-1.239 1.82-9.198 6.338-15.898l-.542-.366a38.455 38.455 0 00-3.39 6.303zM80.864 218.809c3.882-4.395 10.465-2.62 10.53-2.602l.274.076 11.285-25.54-.597-.263-11.061 25.031c-1.342-.297-7.237-1.305-10.921 2.864l.49.434zM104.523 153.044c7.922 0 12.844-4.342 12.918-4.409l-.438-.495c-.109.099-11.035 9.72-26.652-.367l-.354.55c5.484 3.55 10.411 4.721 14.526 4.721zM91.395 279.469c.037-.121 3.76-12.52-2.476-39.199l-.636.148c6.19 26.491 2.535 38.734 2.498 38.855l.614.196z" fill="#370522"/><path d="M99.453 48.781l.379 12.585s-8.202 5.53-14.243.792l.822-12.107 13.042-1.27z" fill="url(#paint14_linear)"/><path d="M85.805 59.046s2.288-2.451 4.937-7.276l-4.52 1.109-.417 6.167z" fill="#750B3B"/><path d="M82.844 55.781c2.498.52 12.943-3.203 14.934-6.56.708-1.196.888-4.576.572-6.257-.99-5.271.351-11.077-3.427-12.941-1.592-.78-8.774-1.538-10.322-1.812-6.053-1.085-5.823 6.783-6.466 11.923-.726 5.756.307 14.714 4.709 15.647z" fill="url(#paint15_linear)"/><path d="M80.641 30.958c.552.267 2.255.968 2.255.968s.352 4.355.963 5.989c.612 1.634-1.638 7.281-4.661 7.76-3.023.477-1.204 3.745-.973 5.141.329 1.996-1.573 4.058 2.154 5.487 2.475.953 8.808-.305 7.266-4.308-1.542-4.004-4.239-9.022-1.327-13.303 2.912-4.28-.611 5.313 4.729 8.913 5.34 3.6 6.734 4.987 6.734 4.987s.792-2.229 2.352-2.741c1.56-.513 6.11-5.742 6.437-12.627.327-6.885-2.746-9.294-8.821-10.656-6.076-1.362-3.84-3.887-7.633-4.704-3.793-.817-8.512-5.509-8.512-5.509S75.58 28.5 80.641 30.959z" fill="url(#paint16_linear)"/><path d="M92.613 42.66c-1.114 2.186-3.535 3.184-5.41 2.228-1.874-.956-2.488-3.5-1.374-5.694 1.114-2.194 3.538-3.184 5.41-2.229 1.872.956 2.488 3.514 1.374 5.695z" fill="url(#paint17_linear)"/><path d="M86.992 43.264c.088.1.194.184.312.247a.91.91 0 00.815.028c.609-.248.643-.726.673-1.107a1.331 1.331 0 01.51-1.1 2.766 2.766 0 011.094-.494c.594-.169 1.266-.36 1.134-1.53a1.352 1.352 0 00-.527-.936c-.874-.686-2.55-.483-2.62-.473l.082.648c.409-.051 1.59-.091 2.134.337a.723.723 0 01.28.495c.072.62-.084.661-.66.827-.487.11-.943.326-1.335.634a1.957 1.957 0 00-.743 1.552c-.027.362-.045.458-.273.553a.265.265 0 01-.247 0c-.248-.134-.421-.662-.465-.897l-.644.122c.074.396.239.77.48 1.094z" fill="#750B3B"/><path d="M126.929 112.768h.548c-.35-17.392-5.588-32.198-5.64-32.346l-.515.183c.052.139 5.258 14.867 5.607 32.163z" fill="#370522"/></g><defs><linearGradient id="paint0_linear" x1="143.459" y1="102.333" x2="130.748" y2="147.727" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint1_linear" x1="-34187.4" y1="29457.3" x2="-35442.5" y2="29457.3" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint2_linear" x1="93.318" y1="88.824" x2="157.221" y2="88.824" gradientUnits="userSpaceOnUse"><stop stop-color="#3A0122"/><stop offset="1" stop-color="#82004A"/></linearGradient><linearGradient id="paint3_linear" x1="114.119" y1="159.261" x2="122.421" y2="281.175" gradientUnits="userSpaceOnUse"><stop stop-color="#DD5700"/><stop offset="1" stop-color="#F8AA02"/></linearGradient><linearGradient id="paint4_linear" x1="-89835.8" y1="125476" x2="-94838.8" y2="166419" gradientUnits="userSpaceOnUse"><stop stop-color="#DD5700"/><stop offset="1" stop-color="#F8AA02"/></linearGradient><linearGradient id="paint5_linear" x1="-84856.6" y1="138873" x2="-58324.1" y2="176123" gradientUnits="userSpaceOnUse"><stop stop-color="#DD5700"/><stop offset="1" stop-color="#F8AA02"/></linearGradient><linearGradient id="paint6_linear" x1="-115459" y1="138249" x2="-92484.7" y2="182808" gradientUnits="userSpaceOnUse"><stop stop-color="#DD5700"/><stop offset="1" stop-color="#F8AA02"/></linearGradient><linearGradient id="paint7_linear" x1="-153934" y1="193181" x2="-110708" y2="154444" gradientUnits="userSpaceOnUse"><stop stop-color="#3A0122"/><stop offset="1" stop-color="#82004A"/></linearGradient><linearGradient id="paint8_linear" x1="-45123.6" y1="52623.9" x2="-38221.9" y2="42589.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint9_linear" x1="-21230.6" y1="6957.96" x2="-20866.2" y2="5073.86" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint10_linear" x1="-39862" y1="43021.7" x2="-34384.8" y2="34422.4" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint11_linear" x1="-20819.9" y1="25134.6" x2="-17457.1" y2="20464.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint12_linear" x1="-75333.1" y1="41006.5" x2="-71852.5" y2="30507.6" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint13_linear" x1="-116005" y1="69125.6" x2="-103147" y2="44833.8" gradientUnits="userSpaceOnUse"><stop stop-color="#3A0122"/><stop offset="1" stop-color="#82004A"/></linearGradient><linearGradient id="paint14_linear" x1="-26606" y1="16883.7" x2="-25881.5" y2="14696.1" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint15_linear" x1="-38461.6" y1="30548.2" x2="-36902.7" y2="26795.9" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><linearGradient id="paint16_linear" x1="-52457.1" y1="40026.3" x2="-55882.4" y2="40026.3" gradientUnits="userSpaceOnUse"><stop stop-color="#3A0122"/><stop offset="1" stop-color="#82004A"/></linearGradient><linearGradient id="paint17_linear" x1="-14742.4" y1="9544.73" x2="-14326.1" y2="8312.66" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAB48"/><stop offset="1" stop-color="#F8CFA3"/></linearGradient><clipPath id="clip0"><path fill="#fff" transform="matrix(-1 0 0 1 157.355 0)" d="M0 0h156.382v293H0z"/></clipPath></defs></svg>
                                </div>
                            </div>

                            <div class="flex mb-10 md:mb-3 md:justify-end">
                                <button @click="logout(); router.push('/login');" class="py-3 px-2 border-2 border-base-red text-base-red rounded-md">Выйти</button>
                            </div>
                        </div>
                    </div>
                    <!-- <div @click="log">click to log date + day</div> -->
            </div>
        </div>
    </div>
</template>

<script lang="ts">
import { defineComponent, ref, watchEffect } from 'vue'
import authFuncs from '../composables/authFuncs'
import StockLinks from "../components/StockLinks.vue"
import StockNav from "../components/StockNav.vue"
import { useRouter } from 'vue-router' 

export default defineComponent({
    components: {
        StockLinks,
        StockNav,
    },
    setup() {
        const router = useRouter()
        const userName = ref('')

        const toggleName = ref(false)

        const togglePassword = ref(false)
        const pass1 = ref('')
        const pass2 = ref('')

        const { user, dbUser, getUser, updateName, logout, newPassword, passwordUpdated, passwordUpdatedError, hasAccess } = authFuncs()
        getUser()
        const log = () => {
            console.log(hasAccess())
        }

        const updatePass = () => {
            if (pass1.value && pass1.value === pass2.value) {
                newPassword(pass1.value)
            }
        }

        watchEffect(() => {
            try {
                userName.value = user.value.displayName
            } catch (error) {
                
            }
        })

        return {
            user,
            dbUser,
            userName,
            updateName,
            logout,
            router,
            togglePassword,
            pass1,
            pass2,
            updatePass,
            passwordUpdated,
            passwordUpdatedError,
            toggleName,
            hasAccess,
            log,
        }
    },
})
</script>
